{
  "info": { "title": "ORPC Test Application", "version": "1.0.0" },
  "servers": [{ "url": "/rpc" }],
  "openapi": "3.1.1",
  "paths": {
    "/hello": {
      "get": {
        "operationId": "hello",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "schema": {
              "type": "string",
              "description": "Optional name to personalize the greeting"
            },
            "allowEmptyValue": true,
            "allowReserved": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "description": "The greeting message"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "x-native-type": "date",
                      "description": "The current server timestamp"
                    }
                  },
                  "required": ["message", "timestamp"]
                }
              }
            }
          }
        }
      }
    },
    "/add": {
      "post": {
        "operationId": "add",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "a": {
                    "type": "number",
                    "description": "First number to add"
                  },
                  "b": {
                    "type": "number",
                    "description": "Second number to add"
                  }
                },
                "required": ["a", "b"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "result": {
                      "type": "number",
                      "description": "The sum of the two numbers"
                    }
                  },
                  "required": ["result"]
                }
              }
            }
          }
        }
      }
    },
    "/multiply": {
      "post": {
        "operationId": "multiply",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "a": {
                    "type": "number",
                    "description": "First number to multiply"
                  },
                  "b": {
                    "type": "number",
                    "description": "Second number to multiply"
                  }
                },
                "required": ["a", "b"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "result": {
                      "type": "number",
                      "description": "The product of the two numbers"
                    }
                  },
                  "required": ["result"]
                }
              }
            }
          }
        }
      }
    },
    "/shuffle-email": {
      "post": {
        "operationId": "shuffleEmail",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "type": "object" } } }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "originalEmail": { "type": "string" },
                    "shuffledEmail": { "type": "string" }
                  },
                  "required": ["originalEmail", "shuffledEmail"]
                }
              }
            }
          }
        }
      }
    },
    "/error-handling": {
      "post": {
        "operationId": "errorHandling",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "shouldError": {
                    "type": "boolean",
                    "description": "Whether to intentionally trigger an error"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "description": "Response message"
                    },
                    "success": {
                      "type": "boolean",
                      "description": "Whether the operation was successful"
                    }
                  },
                  "required": ["message", "success"]
                }
              }
            }
          }
        }
      }
    },
    "/form-validation": {
      "post": {
        "operationId": "formValidation",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string", "minLength": 2, "maxLength": 5 }
                },
                "required": ["name"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "success": { "type": "boolean" },
                    "validatedData": {
                      "type": "object",
                      "properties": { "name": { "type": "string" } },
                      "required": ["name"]
                    }
                  },
                  "required": ["message", "success", "validatedData"]
                }
              }
            }
          }
        }
      }
    },
    "/file-upload": {
      "post": {
        "operationId": "fileUpload",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "not": {},
                    "description": "The file to upload (JPEG, PNG, GIF, or PDF, max 5MB)"
                  }
                },
                "required": ["file"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "description": "Response message"
                    },
                    "success": {
                      "type": "boolean",
                      "description": "Whether the upload was successful"
                    },
                    "fileName": {
                      "type": "string",
                      "description": "Original filename"
                    },
                    "fileSize": {
                      "type": "number",
                      "description": "File size in bytes"
                    },
                    "fileType": {
                      "type": "string",
                      "description": "MIME type of the uploaded file"
                    }
                  },
                  "required": [
                    "message",
                    "success",
                    "fileName",
                    "fileSize",
                    "fileType"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/event-iterator": {
      "get": {
        "operationId": "eventIterator",
        "parameters": [
          {
            "name": "duration",
            "in": "query",
            "schema": { "type": "string" },
            "allowEmptyValue": true,
            "allowReserved": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/event-stream": {
                "schema": {
                  "oneOf": [
                    {
                      "type": "object",
                      "properties": {
                        "event": { "const": "message" },
                        "data": {
                          "type": "object",
                          "properties": {
                            "message": { "type": "string" },
                            "timestamp": { "type": "number" },
                            "count": { "type": "number" },
                            "isEnd": { "type": "boolean" }
                          },
                          "required": ["message", "timestamp", "count"]
                        },
                        "id": { "type": "string" },
                        "retry": { "type": "number" }
                      },
                      "required": ["event", "data"]
                    },
                    {
                      "type": "object",
                      "properties": {
                        "event": { "const": "done" },
                        "data": {},
                        "id": { "type": "string" },
                        "retry": { "type": "number" }
                      },
                      "required": ["event"]
                    },
                    {
                      "type": "object",
                      "properties": {
                        "event": { "const": "error" },
                        "data": {},
                        "id": { "type": "string" },
                        "retry": { "type": "number" }
                      },
                      "required": ["event"]
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/server-action": {
      "post": {
        "operationId": "serverAction",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" }
                },
                "required": ["email"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "email": { "type": "string", "format": "email" },
                    "createdAt": { "type": "string" }
                  },
                  "required": ["id", "email", "createdAt"]
                }
              }
            }
          }
        }
      }
    }
  }
}
